# 문제은행시스템 기술스택(취합본)
> 기준: **Vue + Vite + Spring Boot(JDK 21) + Spring MVC(업무단위 분리) + Token 인증(재발행 지원)**  
> 패키지 Root: `kr.co.iosys` / 공통: `common.class`, `common.code` / 통합콘텐츠: `content.quiz`, `content.test`

---

## 1. Frontend (Vue + Vite)

### 1.1 기본 스택
- **Framework**: Vue 3
- **Build Tool**: Vite
- **Language**: JavaScript *(필요 시 TypeScript로 확장 가능)*
- **Routing**: vue-router
- **State Management**: Pinia
- **HTTP Client**: Axios

### 1.2 UI / 스타일
- **CSS 선택지**
  - Tailwind CSS *(권장: 빠른 UI 구성)*
  - SCSS *(사내 스타일 가이드/기존 CSS 정책에 따라 선택)*
- **컴포넌트 UI 라이브러리(선택)**: Element Plus / Vuetify / Naive UI

### 1.3 품질/개발 생산성
- **Lint/Format**: ESLint + Prettier
- **Git Hook(선택)**: Husky + lint-staged
- **테스트(선택)**
  - Unit: Vitest
  - E2E: Playwright 또는 Cypress

---

## 2. Backend (Spring Boot + Spring MVC, JDK 21)

### 2.1 기본 스택
- **Runtime**: JDK 21 (LTS)
- **Framework**: Spring Boot 3.x
- **Web**: Spring MVC 기반 REST API
- **Validation**: Jakarta Validation (hibernate-validator)
- **Logging**: SLF4J + Logback
- **API 문서(권장)**: springdoc-openapi (Swagger UI)

### 2.2 아키텍처 원칙(업무단위 도메인 분리)
- 기본 레이어: **Controller → Service → Mapper/Repository**
- 업무단위(도메인) 패키지 분리 (예: `makeq`, `invq`, `quizsel`, `content` 등)
- 공통 모듈은 `kr.co.iosys.common` 하위로 일원화

---

## 3. 인증/인가 (Token 기반, 재발행 필수)

### 3.1 인증 방식
- **Token 기반 인증(Stateless)** + Spring Security
- 권장 구성: **Access Token(짧게) + Refresh Token(길게)**

### 3.2 재발행(Refresh) 표준
- Access 만료 시 Refresh로 재발행 가능해야 함
- 권장 정책
  - Refresh Token Rotation(회전 발급)
  - 폐기/재사용 탐지(보안 강화)

### 3.3 표준 엔드포인트(예시)
- `POST /api/auth/login` : accessToken + refreshToken 발급
- `POST /api/auth/refresh` : refreshToken으로 accessToken 재발행 *(필수)*
- `POST /api/auth/logout` : refreshToken 폐기(서버 저장소/무효화 정책)

### 3.4 권한(RBAC)
- 메뉴 노출(프론트) + API 접근 제어(서버) **동시 적용**
- 서버가 **최종 권한 검증** 수행
- 역할/권한 모델 예시: USER ↔ ROLE ↔ PERMISSION ↔ MENU/API

---

## 4. Data / Database

### 4.1 DBMS
- **MariaDB** (권장 Charset: `utf8mb4`)

### 4.2 데이터 접근
- **MyBatis** *(SQL 통제/기존 운영 스타일에 적합)*
- Connection Pool: HikariCP(기본)

### 4.3 스키마 관리(권장)
- Flyway 또는 Liquibase *(환경별 스키마 동기화/이력 관리)*

---

## 5. 패키지/도메인 표준(kr.co.iosys)

### 5.1 공통(Common)
- `kr.co.iosys.common.class` : 분류 트리(조회/등록/수정/비활성)
- `kr.co.iosys.common.code` : 공통코드(코드그룹/상세코드)
- `kr.co.iosys.common.security` : Token 필터/검증/Principal 등
- `kr.co.iosys.common.config` : Web/CORS/Swagger/Security 설정
- `kr.co.iosys.common.response` : 공통 응답 래퍼, 페이징
- `kr.co.iosys.common.exception` : 예외코드/GlobalHandler
- `kr.co.iosys.common.util` : 공통 유틸

### 5.2 인증/Auth
- `kr.co.iosys.auth` : 로그인/재발행/로그아웃 등 인증 업무

### 5.3 시스템/System
- `kr.co.iosys.system`
  - 사용자/권한/메뉴/화면/로그(접속로그, 작업로그)

### 5.4 업무 도메인(출제/검토/선정)
- `kr.co.iosys.makeq` : 출제(개발)
- `kr.co.iosys.invq` : 검토(심사)
- `kr.co.iosys.quizsel` : 선정

### 5.5 콘텐츠 통합(Content)
- `kr.co.iosys.content.quiz` : 문항관리(문항 마스터/첨부/이력/검색)
- `kr.co.iosys.content.test` : 시험지관리(시험지/편성/목차/양식)

> 내부 구조(권장): 각 모듈이 `controller / service / mapper / dto / domain` 세트를 동일하게 가진다.

---

## 6. API Prefix 표준(권장)

### 6.1 공통
- 분류: `/api/common/class/*`
- 공통코드: `/api/common/code/*`

### 6.2 인증/시스템
- 인증: `/api/auth/*`
- 시스템: `/api/system/*`

### 6.3 업무
- 출제(개발): `/api/makeq/*`
- 검토(심사): `/api/invq/*`
- 선정: `/api/quizsel/*`

### 6.4 콘텐츠 통합
- 문항관리: `/api/content/quiz/*`
- 시험지관리: `/api/content/test/*`

---

## 7. 파일/첨부(운영 표준)
- 업로드/다운로드: Multipart 기반
- 정책: 확장자/용량 제한, 다운로드 권한 체크
- 감사로그: 다운로드/내보내기/중요 상태변경 기록

---

## 8. DevOps / 배포(권장)

### 8.1 빌드
- Front: `vite build`
- Back: Gradle 또는 Maven(JDK 21)

### 8.2 배포 구조(권장)
- Front 정적 리소스: Nginx(또는 CDN)
- Back API: Spring Boot Jar (Reverse Proxy 뒤)

### 8.3 컨테이너/CI(선택)
- Docker / Docker Compose
- Jenkins 또는 GitHub Actions

---

## 9. 운영/관측(선택)
- Spring Boot Actuator(Health 등)
- Metrics: Prometheus + Grafana(선택)
- Log: ELK/EFK 또는 Loki(선택)
- 작업로그/접속로그: DB 적재(필수 정책)

---

## 10. 참고: 공통 응답 래퍼 표준
- `result`: success | fail
- `message`
- `errorMessage` *(정책에 따라 외부 비노출 가능)*
- `data`
